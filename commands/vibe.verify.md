---
description: Verify implementation against SPEC requirements
argument-hint: "feature name"
---

# /vibe.verify

**품질 검증 자동화** - 비개발자도 품질을 신뢰할 수 있도록.

> 모든 시나리오 통과 = 품질 보장

## Usage

```
/vibe.verify "feature-name"              # SPEC 기반 검증
/vibe.verify --e2e "feature-name"        # E2E 브라우저 테스트 (agents/e2e-tester.md)
/vibe.verify --e2e --visual              # 시각적 회귀 테스트
/vibe.verify --e2e --record              # 비디오 녹화
```

## 핵심 원칙

```
┌─────────────────────────────────────────────────────────────────┐
│  비개발자가 알아야 할 것                                         │
│                                                                 │
│  ✅ 시나리오 4/4 통과                                           │
│  📈 품질 점수: 94/100                                           │
│                                                                 │
│  이것만 보면 됨. 나머지는 시스템이 알아서.                        │
└─────────────────────────────────────────────────────────────────┘
```

## Process

### 1. Load Feature File

```
📄 .claude/vibe/features/{feature-name}.feature → 시나리오 목록
📄 .claude/vibe/specs/{feature-name}.md → 검증 기준 (참조)
```

**Feature 파일이 없으면**:
```
❌ Feature 파일이 없습니다.
   먼저 /vibe.spec "{feature-name}"을 실행하세요.
```

### 2. Scenario-by-Scenario Verification

각 시나리오별 자동 검증:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 Scenario 1/4: 유효한 로그인 성공
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Given: 사용자가 등록되어 있다
  → 검증: 사용자 생성 API 존재? ✅
  → 검증: 테스트 사용자 데이터? ✅

When: 유효한 이메일과 비밀번호로 로그인
  → 검증: POST /login 엔드포인트? ✅
  → 검증: 요청 처리 로직? ✅

Then: 로그인 성공 + JWT 토큰 반환
  → 검증: 성공 응답 코드 200? ✅
  → 검증: JWT 토큰 포함? ✅

✅ Scenario 1 통과!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 3. Verification Methods (자동 선택)

| 방법 | 조건 | 검증 내용 |
|------|------|-----------|
| **테스트 실행** | 테스트 파일 존재 시 | `npm test`, `pytest` 등 실행 |
| **코드 분석** | 항상 | 구현 여부, 로직 확인 |
| **빌드 검증** | 빌드 스크립트 존재 시 | 컴파일 에러 확인 |
| **타입 검사** | TypeScript 등 | 타입 에러 확인 |

### 4. Quality Report (자동 생성)

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 VERIFICATION REPORT: login                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ✅ 시나리오: 4/4 통과 (100%)                                   │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ # │ Scenario              │ Given │ When │ Then │ Status │  │
│  │───│───────────────────────│───────│──────│──────│────────│  │
│  │ 1 │ 유효한 로그인 성공     │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  │ 2 │ 잘못된 비밀번호 에러   │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  │ 3 │ 이메일 형식 검증       │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  │ 4 │ 비밀번호 찾기 링크     │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  📈 품질 점수: 94/100                                           │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 항목              │ 결과  │ 상세                        │    │
│  │───────────────────│───────│─────────────────────────────│    │
│  │ 빌드              │ ✅    │ 성공                        │    │
│  │ 테스트            │ ✅    │ 12/12 통과                  │    │
│  │ 타입 검사         │ ✅    │ 에러 0개                    │    │
│  │ 복잡도            │ ✅    │ 모든 함수 ≤20줄            │    │
│  │ 코드 커버리지     │ ⚠️    │ 78% (목표: 80%)             │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  📋 권장 사항:                                                   │
│  - 코드 커버리지 2% 추가 필요 (auth.service.ts line 45-52)      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 실패 시 리포트

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 VERIFICATION REPORT: login                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ❌ 시나리오: 3/4 통과 (75%)                                    │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ # │ Scenario              │ Given │ When │ Then │ Status │  │
│  │───│───────────────────────│───────│──────│──────│────────│  │
│  │ 1 │ 유효한 로그인 성공     │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  │ 2 │ 잘못된 비밀번호 에러   │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  │ 3 │ 이메일 형식 검증       │ ✅    │ ✅   │ ✅   │ ✅     │  │
│  │ 4 │ 비밀번호 찾기 링크     │ ✅    │ ❌   │ -    │ ❌     │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ❌ 실패 상세:                                                   │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│  Scenario 4: 비밀번호 찾기 링크                                  │
│                                                                 │
│  When: "비밀번호 찾기" 클릭                                      │
│  ❌ 문제: 링크가 구현되지 않음                                   │
│  📍 위치: LoginForm.tsx line 42                                  │
│  💡 수정: "Forgot password" 링크 추가 필요                       │
│                                                                 │
│  🔧 자동 수정 실행: /vibe.run "login" --fix                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Input

- `.claude/vibe/features/{feature-name}.feature` - BDD scenarios
- `.claude/vibe/specs/{feature-name}.md` - SPEC document (reference)
- Implemented source code

## Output

- Verification result report (terminal output)
- Passed/failed scenario list
- Items needing fixes

## Example

```
User: /vibe.verify "login"

Claude:
📄 Loading Feature: .claude/vibe/features/login.feature
🔍 검증 시작...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 Scenario 1/4: 유효한 로그인 성공
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ✅ Given: 사용자 등록 - OK
  ✅ When: 로그인 시도 - OK
  ✅ Then: JWT 토큰 반환 - OK
✅ 통과!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 Scenario 2/4: 잘못된 비밀번호 에러
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ✅ Given: OK
  ✅ When: OK
  ✅ Then: OK
✅ 통과!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 Scenario 3/4: 이메일 형식 검증
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ✅ Given: OK
  ✅ When: OK
  ✅ Then: OK
✅ 통과!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 Scenario 4/4: 비밀번호 찾기 링크
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ✅ Given: OK
  ❌ When: "비밀번호 찾기" 링크 - 없음
  - Then: (스킵)
❌ 실패!

┌─────────────────────────────────────────────────────────────────┐
│  📊 VERIFICATION REPORT: login                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ❌ 시나리오: 3/4 통과 (75%)                                    │
│                                                                 │
│  | # | Scenario              | Status |                         │
│  |---|───────────────────────|────────|                         │
│  | 1 | 유효한 로그인 성공     | ✅     |                         │
│  | 2 | 잘못된 비밀번호 에러   | ✅     |                         │
│  | 3 | 이메일 형식 검증       | ✅     |                         │
│  | 4 | 비밀번호 찾기 링크     | ❌     |                         │
│                                                                 │
│  📈 품질 점수: 75/100                                           │
│                                                                 │
│  ❌ 수정 필요:                                                   │
│  - Scenario 4: LoginForm.tsx에 "Forgot password" 링크 추가      │
│                                                                 │
│  🔧 자동 수정: /vibe.run "login" --fix                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Next Step

On verification pass:
```
Complete! Proceed to next feature.
```

On verification fail:
```
/vibe.run "feature-name" --fix  # Fix failed scenarios
```

---

ARGUMENTS: $ARGUMENTS
